<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ShopManager</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script type="text/javascript" src="/webjars/jquery/3.3.1-2/jquery.js"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    &lt;!&ndash;主要样式控制&ndash;&gt;
    <link th:href="@{/css/main.css}" rel="stylesheet">
    <style>
        body{
            padding-top: 50px;
        }
        th{
            text-align: center;
        }
        tr{
            text-align: center;
        }
    </style>
    <script th:inline="javascript">
        /*个人管理*/
        function showOwn() {
            $("#searchName").html([[${session.managerSession.name}]]);
            $("#searchId").html([[${session.managerSession.id}]]);
            $("#searchPassword").html([[${session.managerSession.password}]]);
            $("#searchTime").html([[${session.managerSession.creation}]]);
            $("#searchModified").html([[${session.managerSession.modified}]]);
            $("#mySearchModal").modal("show");
        }
        function modifyOwn() {
            $("#myOwnModal").modal("show");
        }
        function check1(){
            var id = [[${session.managerSession.id}]];
            var password = $("#password1").val();
            var repassword = $("#repassword1").val();
            if ($.trim(password) == "") {
                alert("请输入新密码！");
                return;
            }
            if($.trim(password) != $.trim(repassword)){
                alert("两次密码输入不一致！");
                return;
            }
            var manager = {"id":id, "password":password};
            $.ajax({
                url : "/managerModifyPassword",
                data : JSON.stringify(manager),
                type : "POST",
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if(data != null){
                        if(data.status == "修改成功"){
                            alert("修改成功，请重新登陆");
                            location="/managerLoginOut";
                        }else{
                            alert(data.status);
                        }
                    }else{
                        alert("修改失败！");
                    }
                },
                error : function(){
                    alert("修改失败！");
                }
            });
        }
        /*删除口味*/
        function del(id){
            var c = confirm('确定删除编号为'+id+'口味？');
            if(!c){
                return;
            }
            $.ajax({
                url : "/delFlavor",
                type : "POST",
                data : {"id":id},
                dataType : "json",
                success : function(data){
                    if(data != null){
                        if(data.status){
                            alert("删除成功");
                            history.go(0);
                        }else{
                            alert("删除失败");
                        }
                    }else{
                        alert("删除失败！");
                    }
                },
                error : function(){
                    alert("删除失败！");
                }
            });
        }
        /*修改口味*/
        function modify(id){
            $("#ModifyFlavor").text(id);
        }
        function checkModifyFlavor() {
            var id = $("#ModifyFlavor").text();
            var name = $("#newFlavor").val();
            if ($.trim(name) == ""){
                alert("请输入口味名称")
                return;
            }
            var flavor = {"id":id, "name":name};
            $.ajax({
                url : "/modifyFlavor",
                data : JSON.stringify(flavor),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("修改成功！");
                            history.go(0);
                        } else if (data.status == "false")  {
                            alert("该口味已存在，请您换个名称")
                        } else {
                            alert("修改失败！")
                        }
                    }
                },
                error : function(){
                    alert("修改失败！");
                }
            });
        }
        /*增加口味*/
        function addFlavor() {
            var name = $("#addFlavorName").val();
            if ($.trim(name) == ""){
                alert("请输入口味名称");
                return;
            }
            var flavor = {"name":name};
            $.ajax({
                url : "/addFlavor",
                data : JSON.stringify(flavor),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("添加成功！");
                            history.go(0);
                        } else if (data.status == "false")  {
                            alert("该口味已存在，请您换个名称")
                        } else {
                            alert("添加失败！")
                        }
                    }
                },
                error : function(){
                    alert("添加失败！");
                }
            });
        }
        /*搜索口味*/
        function searchFlavor() {
            var name = $("#searchFlavorName").val();
            if ($.trim(name) == "")	{
                return;
            }
            var flavor = {"name":name};
            $.ajax({
                url : "/searchFlavor",
                data : JSON.stringify(flavor),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if(data.status != null){
                        $("#searchFlavorId").text(data.status.id);
                        $("#a").text(name);
                        $("#creation").text(data.status.creation);
                        $("#modified").text(data.status.modified);
                        $("#mySearchFlavorModal").modal("show");
                    }else{
                        alert("没有该口味");
                    }
                },
                error : function(){
                    alert("查询失败！");
                }
            });
        }
        /*删除菜品*/
        function delFood(id) {
            var c = confirm('确定删除编号为'+id+'菜品？');
            if(!c){
                return;
            }
            $.ajax({
                url : "/delFood",
                type : "POST",
                data : {"id":id},
                dataType : "json",
                success : function(data){
                    if(data != null){
                        if(data.status){
                            alert("删除成功");
                            history.go(0);
                        }else{
                            alert("删除失败");
                        }
                    }else{
                        alert("删除失败！");
                    }
                },
                error : function(){
                    alert("删除失败！");
                }
            });
        }
        /*修改菜品*/
        function modifyFood(id) {
            $("#currentModifyFood").text(id);
            $("#ModifyFoodModal").modal("show");
        }
        function modifyCurrentFood() {
            var food_id = $("#currentModifyFood").text();
            var introduce1 = $("#foodintroduce1").val();
            var introduce2 = $("#foodintroduce2").val();
            var food_name = $("#foodname").val();
            var food_class = $("#FoodClass option:selected").text();
            var hot = $("#foodhot").val();
            var carbohydrate = $("#foodcarbohydrate").val();
            var protein = $("#foodprotein").val();
            var fat = $("#foodfat").val();
            var vitaminA = $("#foodvitaminA").val();
            if ($.trim(food_class) == "请选择（可选）") {
                food_class="";
            }
            if ($.trim(food_class) == "" && $.trim(introduce2) == "" && $.trim(introduce1) == "" && $.trim(food_name) == "" &&
                $.trim(hot) == "" && $.trim(carbohydrate) == "" && $.trim(fat) == "" && $.trim(food_class) == "" ){
                alert("请至少选择一项进行修改");
                return;
            }
            var food = {"id":food_id, "name":food_name, "introduce1":introduce1, "introduce2":introduce2,
                        "kind":food_class, "carbohydrate":carbohydrate, "hot":hot, "protein":protein,
                "vitaminA":vitaminA, "fat":fat};
            $.ajax({
                url : "/modifyFood",
                data : JSON.stringify(food),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("修改成功！");
                            history.go(0);
                        } else if (data.status == "false")  {
                            alert("该菜品名已存在，请您换个名称")
                        } else {
                            alert("修改失败！")
                        }
                    }
                },
                error : function(){
                    alert("修改失败！");
                }
            });
        }
        /*增加食品*/
        function checkAddFood() {
            var flag = 1;
            $("#addFoodForm input").each(function(index, element) {
                if ($.trim(element.value) == "") {
                    alert("请输入完整");
                    flag = 0;
                    return flag == 1;
                }
            });
            return flag == 1;
        }
        /*删除菜品相关的菜谱*/
        function delCookOfFood(food_id, cook_id) {
            var c = confirm('确定删除?');
            if(!c){
                return;
            }
            var f_c = {"food_id":food_id, "cook_id":cook_id};
            $.ajax({
                url : "/delCookOfFood",
                data : JSON.stringify(f_c),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("删除成功！");
                            history.go(0);
                        } else {
                            alert("删除失败！")
                        }
                    }
                },
                error : function(){
                    alert("删除失败！");
                }
            });
        }
        /*添加菜品相关的菜谱*/
        function addCookOfFood(food_id) {
            $("#addCookFoodId").text(food_id);
            $("#AddCookOfFoodModal").modal("show");
        }
        function CheckCookOfFood() {
            var food_id = $("#addCookFoodId").text();
            var cook_id = $("#addCookOfFoodId").val();
            if ($.trim(cook_id) == "")  {
                alert("请输入菜谱编号");
                return;
            }
            var f_c = {"food_id":food_id, "cook_id":cook_id};
            $.ajax({
                url : "/addCookOfFood",
                data : JSON.stringify(f_c),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("添加成功！");
                            history.go(0);
                        } else if (data.status == "false") {
                            alert("添加失败，您输入的菜谱编号不存在！")
                        } else {
                            alert("添加失败，已经存在")
                        }
                    }
                },
                error : function(){
                    alert("添加失败！");
                }
            });
        }
        /*搜索菜品*/
        function searchFood() {
            var food_id = $("#SearchFoodId").val();
            var food_name = $("#SearchFoodName").val();
            var food_class = $("#SearchFoodClass option:selected").text();
            if ($.trim(food_id) == "" && $.trim(food_name) == "" && food_class == "请选择（可选）") {
                alert("请至少选择一项进行搜索");
                return false;
            }
            return true;
        }
        /*增加菜谱*/
        function checkAddCook() {
            var flag = 0;
            $("#searchStudentForm input").each(function(index, element) {
                if ($.trim(element.value) != "") {
                    flag = 1;
                    return flag == 0;
                }
            });
            return flag == 0;
        }
        /*删除菜谱*/
        function delCook(id) {
            var c = confirm('确定删除编号为'+id+'菜谱？');
            if(!c){
                return;
            }
            $.ajax({
                url : "/delCook",
                type : "POST",
                data : {"id":id},
                dataType : "json",
                success : function(data){
                    if(data != null){
                        if(data.status){
                            alert("删除成功");
                            history.go(0);
                        }else{
                            alert("删除失败");
                        }
                    }else{
                        alert("删除失败！");
                    }
                },
                error : function(){
                    alert("删除失败！");
                }
            });
        }
        /*修改菜谱*/
        function modifyCook(id) {
            $("#currentModifyCook").text(id);
            $("#ModifyCookModal").modal("show");
        }
        function modifyCurrentCook() {
            var food_id = $("#currentModifyCook").text();
            var introduce1 = $("#cookintroduce1").val();
            var introduce2 = $("#cookintroduce2").val();
            var food_name = $("#cookname").val();
            var cookweather = $("#cookweather option:selected").text();
            var cooktime = $("#cooktime option:selected").text();
            if ($.trim(cookweather) == "请选择（可选）") {
                cookweather="";
            }
            if ($.trim(cooktime) == "请选择（可选）") {
                cooktime="";
            }
            if ($.trim(cookweather) == "" && $.trim(introduce2) == "" &&
                $.trim(introduce1) == "" && $.trim(cooktime) == "" && $.trim(food_name) == ""){
                alert("请至少选择一项进行修改");
                return;
            }
            var cook = {"id":food_id, "name":food_name, "introduce1":introduce1, "introduce2":introduce2,
                "weather":cookweather, "time":cooktime};
            $.ajax({
                url : "/modifyCook",
                data : JSON.stringify(cook),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("修改成功！");
                            history.go(0);
                        } else if (data.status == "false")  {
                            alert("该菜谱名已存在，请您换个名称")
                        } else {
                            alert("修改失败！")
                        }
                    }
                },
                error : function(){
                    alert("修改失败！");
                }
            });
        }
        /*删除菜品相关的菜谱*/
        function delFoodOfCook(food_id, cook_id) {
            var c = confirm('确定删除?');
            if(!c){
                return;
            }
            var f_c = {"food_id":cook_id, "cook_id":food_id};
            $.ajax({
                url : "/delCookOfFood",
                data : JSON.stringify(f_c),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("删除成功！");
                            history.go(0);
                        } else {
                            alert("删除失败！")
                        }
                    }
                },
                error : function(){
                    alert("删除失败！");
                }
            });
        }
        /*添加菜品相关的菜谱*/
        function addFoodOfCook(food_id) {
            $("#addFoodofCookId").text(food_id);
            $("#AddFoodofCookModal").modal("show");
        }
        function CheckFoodOfCook() {
            var food_id = $("#FoodOfCookId").val();
            var cook_id = $("#addFoodofCookId").text();
            if ($.trim(food_id) == ""){
                alert("请输入菜谱编号");
                return;
            }
            var f_c = {"food_id":food_id, "cook_id":cook_id};
            $.ajax({
                url : "/addCookOfFood",
                data : JSON.stringify(f_c),
                type : "POST",
                async: true,
                contentType: 'application/json; charset=UTF-8',
                dataType : "json",
                success : function(data){
                    if (data != null){
                        if (data.status == "ok"){
                            alert("添加成功！");
                            history.go(0);
                        } else if (data.status == "false") {
                            alert("添加失败，您输入的菜谱编号不存在！")
                        } else if (data.status == "false2"){
                            alert("添加失败，您输入的菜品编号不存在！");
                        } else{
                            alert("添加失败，已经存在");
                        }
                    }
                },
                error : function(){
                    alert("添加失败！");
                }
            });
        }
        /*搜索菜谱*/
        function searchCook() {
            var food_id = $("#SearchCookId").val();
            var food_name = $("#SearchCookName").val();
            var food_class = $("#SearchCookWeather option:selected").text();
            var cook_time = $("#SearchCookTime option:selected").text();
            if ($.trim(food_id) == "" && $.trim(food_name) == "" && food_class == "请选择（可选）" && cook_time == "请选择（可选）") {
                alert("请至少选择一项进行搜索");
                return false;
            }
            return true;
        }
        /*展示菜品详细信息*/
        function showFood(id) {
            $.ajax({
                url : "/showFood",
                data : {"id":id},
                type : "POST",
                dataType : "json",
                success : function(data){
                    if (data != null){
                        $("#show1").text(data.food.introduce1);
                        $("#show2").text(data.food.introduce2);
                        $("#showFoodModal").modal("show");
                    }
                },
                error : function(){
                    alert("查看失败！");
                }
            });
        }
        /*展示菜谱详细信息*/
        function showCook(id) {
            $.ajax({
                url : "/showCook",
                data : {"id":id},
                type : "POST",
                dataType : "json",
                success : function(data){
                    if (data != null){
                        $("#show1").text(data.cook.introduce1);
                        $("#show2").text(data.cook.introduce2);
                        $("#showFoodModal").modal("show");
                    }
                },
                error : function(){
                    alert("查看失败！");
                }
            });
        }
        /*给菜品上传图片*/
        function changePictureForFood(id) {
            $("#currentUploadFoodId").val(id);
            $("#changePictureModal").modal("show");
        }
        function checkFoodUpload() {
            var file = $("#foodFile").val();
            var id = $("#currentUploadFoodId").val();
            if ($.trim(id) == ""){
                alert("请输入上传的食品id");
                return false;
            }
            if (file == null||file == ""){
                alert("请选择要上传的图片!");
                return false;
            }
            if (file.lastIndexOf('.')==-1){    //如果不存在"."
                alert("路径不正确!");
                return false;
            }
            var AllImgExt=".jpg|.jpeg|.gif|.bmp|.png|";
            var extName = file.substring(file.lastIndexOf(".")).toLowerCase();//（把路径中的所有字母全部转换为小写）
            if(AllImgExt.indexOf(extName+"|")==-1)
            {
                var ErrMsg="该文件类型不允许上传。请上传 "+AllImgExt+" 类型的文件，当前文件类型为"+extName;
                alert(ErrMsg);
                return false;
            }
        }
        /*给菜谱上传图片*/
        function changePictureForCook(id) {
            $("#currentUploadCookId").val(id);
            $("#changePictureForCookModal").modal("show");
        }
        function checkCookUpload() {
            var file = $("#CookFile").val();
            var id = $("#currentUploadCookId").val();
            if ($.trim(id) == ""){
                alert("请输入上传的食品id");
                return false;
            }
            if (file == null||file == ""){
                alert("请选择要上传的图片!");
                return false;
            }
            if (file.lastIndexOf('.')==-1){    //如果不存在"."
                alert("路径不正确!");
                return false;
            }
            var AllImgExt=".jpg|.jpeg|.gif|.bmp|.png|";
            var extName = file.substring(file.lastIndexOf(".")).toLowerCase();//（把路径中的所有字母全部转换为小写）
            if(AllImgExt.indexOf(extName+"|")==-1)
            {
                var ErrMsg="该文件类型不允许上传。请上传 "+AllImgExt+" 类型的文件，当前文件类型为"+extName;
                alert(ErrMsg);
                return false;
            }
        }
    </script>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a href="#" class="navbar-brand">大学生健康饮食后台管理系统 </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav" id="mytab">
                <li><a href=""><small>西南石油大学团队</small></a></li>
            </ul>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li role="presentation">
                        <a href="#">当前用户：<span class="badge">[[${session.managerSession.name}]]</span></a>
                    </li>
                    <li><a href="/managerLoginOut">退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<!-- 中间主体内容部分 -->
<div class="pageContainer">
    <!-- 左侧导航栏 -->
    <div class="pageSidebar">
        <ul class="nav nav-stacked nav-pills">
            <li role="presentation dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="" >
                    个人设置<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="javascript:modifyOwn()">修改密码</a>
                    </li>
                    <li>
                        <a href="/managerLoginOut">退出系统</a>
                    </li>
                    <li>
                        <a href="javascript:showOwn()">查看个人信息</a>
                    </li>
                </ul>
            </li>
            <!-- 开始 -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="" >
                    口味管理<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="/checkFlavor" target="mainFrame">查看口味</a>
                    </li>
                    <li>
                        <a href="" data-toggle="modal" data-target="#myAddFlavorModal">增加口味</a>
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="" >
                    菜品管理<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="/checkFood">查看所有菜品</a>
                    </li>
                    <li>
                        <a href="" data-toggle="modal" data-target="#AddFoodModal">增加菜品</a>
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="" >
                    菜谱管理<span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a href="/checkCook">查看所有菜谱</a>
                    </li>
                    <li>
                        <a href="" data-toggle="modal" data-target="#AddCookModal">增加菜谱</a>
                    </li>
                </ul>
            </li>

        </ul>
    </div>
    <!-- 左侧导航和正文内容的分隔线 -->
    <div class="splitter"></div>
    <!-- 正文内容部分 -->
    <div class="pageContent">
        <div th:include="${session.currentHtml} :: ${session.currentFrame}" width="100%" height="355px" frameborder="no" border="0" id="mainFrame" name="mainFrame"></div>
    </div>
</div>
<!-- 底部页脚部分 -->
<div class="footer">
    <p class="text-center">
        2019 &copy; [[${session.managerSession.name}]].
    </p>
</div>
<div class="modal fade" id="mySearchModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">查询结果</h4>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr class="active">
                            <th>账号</th>
                            <th>名称</th>
                            <th>密码</th>
                            <th>注册时间</th>
                            <th>上次修改时间</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="success">
                            <td id="searchId"></td>
                            <td id="searchName"></td>
                            <td id="searchPassword"></td>
                            <td id="searchTime"></td>
                            <td id="searchModified"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal container fade" id="myOwnModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" style="text-align: center">修改密码</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="password" placeholder="输入新的密码" class="form-control" id="password1" name="password"/>
                    </div>
                    <div class="form-group">
                        <input type="password" placeholder="再次输入新的密码" class="form-control" id="repassword1" name="password"/>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="check1()">确定修改</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal container fade" id="myFlavorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModallabel" style="text-align: center">正在修改编号为的<span id="ModifyFlavor"></span>口味</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入新的口味名称" class="form-control" id="newFlavor"/>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="checkModifyFlavor()">确定修改</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal container fade" id="myAddFlavorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myAddModallabel" style="text-align: center">增加口味</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入口味名称" class="form-control" id="addFlavorName"/>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="addFlavor()">确定增加</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="mySearchFlavorModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">查询结果</h4>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr class="active">
                            <th>编号</th>
                            <th>名称</th>
                            <th>创建时间</th>
                            <th>上次修改时间</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="success">
                            <td id="searchFlavorId"></td>
                            <td id="a"></td>
                            <td id="creation"></td>
                            <td id="modified"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ModifyFoodModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">正在修改菜品编号为<span id="currentModifyFood"></span>的信息</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入新的名称（可选）" class="form-control" id="foodname"/>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择新的类别</label>
                        <select class="form-control" id="FoodClass">
                            <option selected>请选择（可选）</option>
                            <option>肉禽类</option>
                            <option>水产类</option>
                            <option>蔬菜类</option>
                            <option>果品类</option>
                            <option>米面豆乳</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入新的热量（可选）" class="form-control" id="foodhot"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入新的碳水化合物量（可选）" class="form-control" id="foodcarbohydrate"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入新的脂肪量（可选）" class="form-control" id="foodfat"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入新的蛋白质量（可选）" class="form-control" id="foodprotein"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入新的碳水化合物量（可选）" class="form-control" id="foodvitaminA"/>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入新的introduce1（可选）" class="form-control" id="foodintroduce1"></textarea>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入新的introduce1（可选）" class="form-control" id="foodintroduce2"></textarea>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="modifyCurrentFood()">确定修改</button>
                    </div>
                </form>
            </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
<div class="modal fade" id="AddFoodModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">增加菜品</h4>
            </div>
            <div class="modal-body" id="addFoodForm">
                <form class="form-horizontal" role="form" method="post" action="/addFood" onsubmit="return checkAddFood()">
                    <div class="form-group">
                        <input type="text" placeholder="输入新的名称" class="form-control" name="name"/>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择新的类别</label>
                        <select class="form-control" name="kind">
                            <option selected>肉禽类</option>
                            <option>水产类</option>
                            <option>蔬菜类</option>
                            <option>果品类</option>
                            <option>米面豆乳</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入热量" class="form-control" name="hot"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入碳水化合物量" class="form-control" name="carbohydrate"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入脂肪量" class="form-control" name="fat"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入蛋白质量" class="form-control" name="protein"/>
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="输入碳水化合物量" class="form-control" name="vitaminA"/>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入introduce1（可选）" class="form-control" name="introduce1"></textarea>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入introduce2（可选）" class="form-control" name="introduce2"></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-danger btn-block">提交</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
            </button>
        </div>
    </div>
</div>
<div class="modal container fade" id="AddCookOfFoodModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="" style="text-align: center">为编号为<span id="addCookFoodId"></span>的菜品增加菜谱</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入菜谱编号" class="form-control" id="addCookOfFoodId"/>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="CheckCookOfFood()">确定增加</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="AddCookModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">增加菜谱</h4>
            </div>
            <div class="modal-body" id="addCookForm">
                <form class="form-horizontal" role="form" method="post" action="/addCook" onsubmit="return checkAddCook()">
                    <div class="form-group">
                        <input type="text" placeholder="输入名称" class="form-control" name="name"/>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择适宜天气</label>
                        <select class="form-control" name="weather">
                            <option selected>晴天</option>
                            <option>阴天</option>
                            <option>雨天</option>
                            <option>春天</option>
                            <option>夏天</option>
                            <option>秋天</option>
                            <option>冬天</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择适宜时间段</label>
                        <select class="form-control" name="time">
                            <option selected>早上</option>
                            <option>中午</option>
                            <option>晚上</option>
                            <option>夜宵</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入introduce1（可选）" class="form-control" name="introduce1"></textarea>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入introduce2（可选）" class="form-control" name="introduce2"></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-danger btn-block">提交</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
            </button>
        </div>
    </div>
</div>
<div class="modal fade" id="ModifyCookModal" role="dialog" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">正在修改菜谱编号为<span id="currentModifyCook"></span>的信息</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入新的名称（可选）" class="form-control" id="cookname"/>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择新的适宜天气</label>
                        <select class="form-control" id="cookweather">
                            <option selected>请选择（可选）</option>
                            <option>阴天</option>
                            <option>晴天</option>
                            <option>雨天</option>
                            <option>春天</option>
                            <option>夏天</option>
                            <option>秋天</option>
                            <option>冬天</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="control-label">选择新的适宜时间段</label>
                        <select class="form-control" id="cooktime">
                            <option selected>请选择（可选）</option>
                            <option>早上</option>
                            <option>中午</option>
                            <option>雨晚上天</option>
                            <option>夜宵</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入新的introduce1（可选）" class="form-control" id="cookintroduce1"></textarea>
                    </div>
                    <div class="form-group">
                        <textarea placeholder="输入新的introduce1（可选）" class="form-control" id="cookintroduce2"></textarea>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="modifyCurrentCook()">确定修改</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
            </button>
        </div>
    </div>
</div>
<div class="modal container fade" id="AddFoodofCookModal" tabindex="-1" role="dialog" aria-labelledby="myModalLable" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" style="text-align: center">为编号为<span id="addFoodofCookId"></span>的菜谱增加原料菜品</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post">
                    <div class="form-group">
                        <input type="text" placeholder="输入菜谱编号" class="form-control" id="FoodOfCookId"/>
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-danger btn-block" onclick="CheckFoodOfCook()">确定增加</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="showFoodModal" role="dialog" tabindex="-1" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">详情</h4>
            </div>
            <div class="modal-body container">
                <div>
                    <label>介绍1</label>
                    <p id="show1" style="width: 500px"></p>
                </div>
                <div>
                    <label>介绍2</label>
                    <p id="show2" style="width: 500px"></p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
            </button>
        </div>
    </div>
</div>
<div class="modal container fade" id="changePictureModal" role="dialog" tabindex="-1" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">上传图片</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post"
                      enctype="multipart/form-data" onsubmit="return checkFoodUpload()" action="/foodUpload">
                    <div class="form-group">
                        <label class="control-label">上传菜品id</label>
                        <input type="text" class="form-control" name="id" id="currentUploadFoodId">
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="file" name="file" id="foodFile">
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-danger form-control">上传</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal container fade" id="changePictureForCookModal" role="dialog" tabindex="-1" aria-label="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">上传图片</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form" method="post"
                      enctype="multipart/form-data" onsubmit="return checkCookUpload()" action="/CookUpload">
                    <div class="form-group">
                        <label class="control-label">上传菜谱id</label>
                        <input type="text" class="form-control" name="id" id="currentUploadCookId">
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="file" name="file" id="CookFile">
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-danger form-control">上传</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(".nav li").click(function() {
        $(".active").removeClass('active');
        $(this).addClass("active");
    });
</script>
<script>
    $("#mytab a").click(function (e) {
        e.preventDefault();
        $(this).tab("show");
    })
</script>
</body>
</html>